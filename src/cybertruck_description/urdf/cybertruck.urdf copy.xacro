<?xml version="1.0"?>
<robot name="cybertruck" xmlns:xacro="http://www.ros.org/wiki/xacro">

  <material name="Material"><color rgba="0.80000 0.03922 0.01961 1.00000"/></material>
  <material name="Material.003"><color rgba="0.80000 0.80000 0.80000 1.00000"/></material>
  <material name="Material.004"><color rgba="0.80000 0.80000 0.80000 1.00000"/></material>
  <material name="Material.005"><color rgba="0.80000 0.80000 0.80000 1.00000"/></material>
  <material name="Material.006"><color rgba="0.80000 0.80000 0.80000 1.00000"/></material>

  <xacro:property name="wheel_mass"  value="1.0"/>
  <xacro:property name="wheel_length"  value="0.41712"/>
  <xacro:property name="wheel_radius"  value="0.47736"/>

  <xacro:macro name="wheel" params="prefix wheel_type visual_rpy *origin *axis">
    <link name="${prefix}_wheel_link">
      <visual>
        <!-- <material name="Material.003"/> -->
        <origin rpy= "${visual_rpy}" xyz="0.00000 0.00000 0.00000"/>
        <geometry>
          <mesh filename="package://cybertruck_description/meshes/dae/${wheel_type}.dae" scale="1.00000 1.00000 1.00000"/>
        </geometry>
      </visual>
      <collision>
        <geometry><cylinder length="${wheel_length}" radius="${wheel_radius}"/></geometry>
      </collision>
      <inertial>
        <mass value="${wheel_mass}"/>
        <!-- <inertia ixx="0.07147" ixy="0.00000" ixz="0.00000" iyy="0.11394" iyz="0.00000" izz="0.07147"/> -->
        <inertia ixx="${(1/12) * wheel_mass * (3*wheel_radius*wheel_radius + wheel_length*wheel_length)}" ixy="0" ixz="0"
          iyy="${(1/12) * wheel_mass * (3*wheel_radius*wheel_radius + wheel_length*wheel_length)}" iyz="0"
          izz="${(1/2) * wheel_mass * (wheel_radius*wheel_radius)}"/>
      </inertial>
    </link>

    <!--바퀴 joint는 diff_drvie 플러그 연동됨으로 확인 필요함-->
    <joint name="${prefix}_wheel" type="continuous">
      <parent link="base_link"/>
      <child link="${prefix}_wheel_link"/>

      <xacro:insert_block name="origin"/>
      <xacro:insert_block name="axis"/>

      <dynamics damping="0.0" friction="20"/>
    </joint>
    <!-- 가제보 연결 필요함 -->
    <!-- <xacro:wheel_gazebo prefix="${prefix}"/> -->
  </xacro:macro>

  <xacro:wheel prefix="front_left" wheel_type="FL_Circle.009" visual_rpy="1.52912 0.00239 3.12352">
      <origin rpy="1.57080 0.00000 3.14159" xyz="1.92193 0.91457 -0.66346"/>
      <axis xyz="0.0 0.0 1.0"/>
      <!-- <limit effort="0.00000" velocity="0.00000"/> -->
  </xacro:wheel>

  <link name="base_footprint"/>
  <link name="base_link">
    <collision name="Body_Plane.001_collision">
      <origin rpy="0.00000 0.00000 0.00000" xyz="-0.21983 -0.00642 0.02146"/>
      <geometry>
        <box size="5.89247 2.16472 1.53486"/>
      </geometry>
    </collision>
    <inertial>
      <inertia ixx="15.12791" ixy="0.00000" ixz="0.00000" iyy="77.69248" iyz="0.00000" izz="82.10694"/>
      <origin rpy="0.00000 0.00000 0.00000" xyz="-0.21983 -0.00642 -0.03121"/>
      <mass value="25.00000"/>
    </inertial>
    <visual name="Body_Plane.001">
      <material name="Material"/>
      <origin rpy="0.00000 0.00000 0.00000" xyz="0.00000 0.00000 0.00000"/>
      <geometry>
        <mesh filename="package://cybertruck_description/meshes/dae/Body_Plane.001.dae" scale="1.00000 1.00000 1.00000"/>
      </geometry>
    </visual>
  </link>
  <joint name="base_joint" type="fixed">
      <parent link="base_footprint"/>
      <child link="base_link"/>
      <origin xyz="0 0 0.2352" rpy="0 0 0"/>
  </joint>

</robot>